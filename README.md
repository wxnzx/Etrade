# AURORA POLARIS Documentation

### Navigation
- [I. Location of Files](#triangular_flag_on_post-i-location-of-files)
- [II. Supported Brokerages Details](#triangular_flag_on_post-ii-supported-brokerages-details)
- [III. Data Models](#triangular_flag_on_post-iii-data-models)
- [IV. Updates](#triangular_flag_on_post-iv-updates)



## :triangular_flag_on_post: I. Location of Files
### 1. *All front-end codes are in [UI](/UI) folder*
Editing .ui file using "QtDesigner" in [UI](/UI) folder to modify any front-end appearance. Be aware that DO NOT change the .py files starting with UI (UI_login_window.py, UI_broker_window.py, etc). All those .py files are auto-generated by pyuic5 from corresponding .ui files, any changes to those .py files will be lost after running pyuic5 again
### 2. *All back-end and part of front-end behavioral codes are realized in [subwindow](/subwindow) folder*
Editing .py file in [subwindow](/subwindow) folder to modify any front-end and back-end behavior
### 3. *All brokerage account functions are fulfilled in [account](/account) folder*
- Be sure to import new brokerage class into [__init__.py](account/__init__.py)
- For functions to get account positions, orders/deals, assets, etc., rename the column names to the corresponding column names once fetched before moving to any next step. For example, FutuAcc.get_acc_pos() will fetch Futu account positions with column names:
      ["code","qty","can_sell_qty","nominal_price","cost_price","position_side","today_pl_val","pl_val","today_buy_qty","today_sell_qty","today_total_qty",]
      be sure to change these names to a standardized column names defined in BrokerBase that all other brokerage accounts will also use
### 4. *All multi-threading utlility functions are accomplished in [utlis/worker](utils/worker) folder and impletemented in each subwindow*

## :triangular_flag_on_post: II. Supported Brokerages Details
| Brokers  | STOP/STOP LIMIT | EXTENDED TRADING HOURS  |
| ---------| --------------- | ----------------------- |
| Futu | * | * |
| TD Ameritrade  | * | * |
| Interactive Brokers  | * | * |
| E\*Trade  | - | - |
### 1. *Futu*
### 2. *TD Ameritrade*
### 3. *Interactive Brokers*
- Order Details Window:  
create_time: trade_time_r  
order_id: order_ref  
history deals can only include current day and six previous days  
No history orders available  
order_id of deals: execution_id
### 4. *E\*Trade*

## :triangular_flag_on_post: III. Data Models
- Position  
  
| COLUMN NAME | DATA TYPE | NOTE |
| ----------- | --------- | ---- |
| account | str |
| code | str |
| qty | str |
| can_sell_qty | int |
| nominal_price | float |
| cost_price | float |
| position_side | str |
| today_pl_val | float |
| pl_val | float |
| today_buy_qty | int |
| today_sell_qty | int |
| today_total_qty | int |

- Orders  
  
| COLUMN NAME | DATA TYPE | NOTE |
| ----------- | --------- | ---- |
| code | str | |
| trd_side | str | "BUY" or "SELL"|
| order_type | str ||
| price | float |3 decimals|
| qty | int ||
| dealt_qty | int |
| dealt_avg_price | float | 3 decimals|
| order_status | str ||
| time_in_force | str ||
| market_session | str ||
| create_time | datetime ||
| aux_price | float | 3 decimals; for null, use np.NaN|
| order_id | str ||


## :triangular_flag_on_post: IV. Updates
### 1. *JIMMY-01/10/2023*
- 修改了 level_one_window 和 modify_order 的界面
- leve one 增加了 market session 交易时段选项，实现包括 futu 等券商盘的前盘后交易
- modify_order 增加了 market session 和 time in force
- 同时 futu.utils 与 td.utils 的 get_today_order 返回值增加了 time_in_force 和 market_session 两项
- order_detail_window 的 modify_confirmed 中的 modified_order_dict 字典键的命名与 place_order 中
的字典键命名统一为空格，去掉了下划线，方便之后程序的调用
